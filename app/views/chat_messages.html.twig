<html>
  <head>
    <title>Eventos - ITESM</title>
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="../web/css/materialize.min.css"  media="screen,projection"/>
     <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
    </style>
    <meta charset="UTF-8"></meta>
  </head>
  <body class="white">
    <header>
      <nav class="top-nav teal lighten-2">
        <a href="#" data-activates="slide-out" class="button-collapse top-nav full show-on-large"><i class="mdi-navigation-menu"></i></a>
        <div class="container">
          <div class="nav-wrapper"><a class="brand-logo center">Inbox</a></div>
        </div>
      </nav>
      <ul id="slide-out" class="side-nav">
        <li><a href="../profile"> <i class="small mdi-action-account-circle left"></i> Profile</a></li>
        <li><a href="./dashboard.html"> <i class="small mdi-action-dashboard left"></i> Dashboard</a></li>
        <li class="active"><a href="./chat.html"><i class="small mdi-communication-chat left"></i>Inbox</a></li>
        <div class="section" style="margin-top: 600px;">
            <div class="row">
              <div class="col s12"><a href="./index.html" class="waves-effect waves-light btn black-text grey">logout</a></div>
            </div>
          </div>
      </ul>
    </header>
    <main>
      <div class="row">
        <div class="col s6 offset-s3">
            <table>
              <tbody>
                <tr>
                  <td><a href="#newMessage" class="waves-effect waves-light btn black-text teal lighten-2 modal-trigger"><i class="mdi-communication-email left"></i>New Message</a></td>
                  <td><a href="#deleteMessage" class="waves-effect waves-light btn black-text teal lighten-2 modal-trigger"><i class="mdi-action-delete left"></i>Delete Message</a></td>
                  <td><a href="#blockUser" class="waves-effect waves-light btn black-text teal lighten-2 modal-trigger"><i class="mdi-content-block left"></i>Block User</a></td>
                </tr>
              </tbody>
            </table>
          <div id="messages">
          </div>
      </div>
    </main>
    <!-- modal form: new message -->
    <div class="modal" id="newMessage">
      <div class="modal-content">
        <h3 class="center">New Message</h3>
        <form class="col s12" id="form-id">
          <div class="row">
            <div class="input-field col s6">
              <i class="material-icons prefix">account_circle</i>
              <input name ="name" id="name" type="text" class="validate">
              <label for="name">Username</label>
            </div>
            <div class="input-field col s12">
              <i class="material-icons prefix">mode_edit</i>
              <textarea id="icon_prefix2" class="materialize-textarea"></textarea>
              <label for="icon_prefix2">Message</label>
            </div>
          </div>
            <div class="modal-footer">
                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat" id="submit-id" onclick="">Send message</a>
                <a href="#!" class="modal-action modal-close waves-effect waves-red btn-flat">Cancel</a>
            </div>
        </form>
      </div>
    </div>
    <!-- Termino del modal -->

    <!-- modal form: delete message -->
    <div class="modal" id="deleteMessage">
      <div class="modal-content">
        <form class="col s12" id="form-id">
          <div class="row">
            <h5 class="center"> Are you sure you want to delete this message? </h5>
          </div>
            <div class="modal-footer">
                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat" id="submit-id" onclick="">Delete message</a>
                <a href="#!" class="modal-action modal-close waves-effect waves-red btn-flat">Cancel</a>
            </div>
        </form>
      </div>
    </div>
    <!-- Termino del modal -->

    <!-- modal form: block user -->
    <div class="modal" id="blockUser">
      <div class="modal-content">
        <h5 class="center">Name of the user?</h5>
        <form class="col s12" id="form-id">
          <div class="row">
            <div class="input-field col s6">
              <i class="material-icons prefix">account_circle</i>
              <input name ="name" id="name" type="text" class="validate">
              <label for="name">Name</label>
            </div>
          </div>
            <div class="modal-footer">
                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat" id="submit-id" onclick="">Block User</a>
                <a href="#!" class="modal-action modal-close waves-effect waves-red btn-flat">Cancel</a>
            </div>
        </form>
      </div>
    </div>
    <!-- Termino del modal -->
    <script src="../web/js/jQuery.min.js"></script>
    <script type="text/javascript" src="../web/js/materialize.min.js"></script>
    <script>
      $(document).ready(function(){
        var data = {{ data|json_encode|raw}};
        var inbox = document.getElementById("messages");
        for(i=0; i<data.length; i++) {
          var name = document.createElement("p");
          var msg = document.createElement("p");
          var time = document.createElement("p");
          name.innerHTML = "<b>" + data[i].first_name + " " + data[i].last_name + "</b>";
          msg.innerHTML = data[i].message;
          time.innerHTML = data[i].time;
          inbox.appendChild(name);
          inbox.appendChild(msg);
          inbox.appendChild(time);
        }
         $(".button-collapse").sideNav();
         $('.modal-trigger').leanModal({
           dismissible: true
         });
      });
    </script>
  </body>
</html>
